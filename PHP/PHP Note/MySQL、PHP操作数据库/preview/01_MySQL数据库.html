<html>
  <head>
	  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>01_MySQL数据库</title>
		<link href="toc/style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/css/zTreeStyle/zTreeStyle.css" media="all" rel="stylesheet" type="text/css"/>
	  <style>
		pre {
		    counter-reset: line-numbering;
		    border: solid 1px #d9d9d9;
		    border-radius: 0;
		    background: #fff;
		    padding: 0;
		    line-height: 23px;
		    margin-bottom: 30px;
		    white-space: pre;
		    overflow-x: auto;
		    word-break: inherit;
		    word-wrap: inherit;
		}

		pre a::before {
		  content: counter(line-numbering);
		  counter-increment: line-numbering;
		  padding-right: 1em; /* space after numbers */
		  width: 25px;
		  text-align: right;
		  opacity: 0.7;
		  display: inline-block;
		  color: #aaa;
		  background: #eee;
		  margin-right: 16px;
		  padding: 2px 10px;
		  font-size: 13px;
		  -webkit-touch-callout: none;
		  -webkit-user-select: none;
		  -khtml-user-select: none;
		  -moz-user-select: none;
		  -ms-user-select: none;
		  user-select: none;
		}

		pre a:first-of-type::before {
		  padding-top: 10px;
		}

		pre a:last-of-type::before {
		  padding-bottom: 10px;
		}

		pre a:only-of-type::before {
		  padding: 10px;
		}

		.highlight { background-color: #ffffcc } /* RIGHT */
		</style>
  </head>
  <body>
	  <div>
				<div style='width:25%;'>
						<ul id="tree" class="ztree" style='width:100%'>

						</ul>
				</div>
        <div id='readme' style='width:70%;margin-left:20%;'>
          	<article class='markdown-body'>
            	<hr>
<h2 id="typora-copy-images-to-media">typora-copy-images-to: media</h2>
<h2 id="mysql-">MySQL数据库</h2>
<p>学习目标：</p>
<ul>
<li>理解数据库作用</li>
<li>理解数据表、字段、主键含义</li>
<li>会使用基本增、删、查、改的SQL语句</li>
<li>会用PHP操作数据库</li>
</ul>
<h3 id="1-">1. 数据库作用</h3>
<h4 id="1-1-">1.1 什么是数据库</h4>
<ul>
<li>数据库就是存数据的仓库。它能方便的让程序员保存数据、管理数据和共享数据。</li>
</ul>
<h4 id="1-2-">1.2 为什么需要数据库？</h4>
<blockquote>
<p> 我们用一个文本文件、或者excel文件都能把数据存起来，那为什么还要用数据库呢？</p>
</blockquote>
<ul>
<li>文件形式管理数据有以下缺点：</li>
</ul>
<pre><code>    1.用文件形式保存数据，不安全，任何人能方便打开和修改删除
    2.所有对数据的操作不会留下记录，不知道是谁操作的
    3.不方便检索信息
    4.其他各种不便，不多枚举
</code></pre><ul>
<li>数据库系统，就能方便解决上述问题。</li>
</ul>
<ul>
<li>常见数据库系统有：MySQL、Oracle、SQLServer等</li>
</ul>
<h3 id="2-mysql-">2. MySQL管理界面</h3>
<h4 id="2-1-">2.1 打开界面</h4>
<ul>
<li>打开PHPStudy，然后点  <code>MySQL管理器</code>，在弹出的界面中选  <code>MySQL-Front</code></li>
<li><p>如图：</p>
<p><img src="media/1521106935950.png" alt="1521106935950"></p>
</li>
<li><p>弹出的界面点打开即可</p>
</li>
</ul>
<p> <img src="media/1521107193552.png" alt="1521107193552"></p>
<h4 id="2-2-">2.2 新建数据库</h4>
<ul>
<li>打开后，右键localhost，然后依次选新建、数据库。</li>
</ul>
<p><img src="media/1521107792307.png" alt="1521107792307">    </p>
<ul>
<li>输入数据库名字，再点确定就好。<strong>注意：请使用英文名字。</strong></li>
</ul>
<p><img src="media/1521107831420.png" alt="1521107831420"></p>
<h4 id="2-3-">2.3 数据表</h4>
<h5 id="2-3-1-">2.3.1 建表</h5>
<ul>
<li><p>为了更好的对数据进行分类，数据库提供了  <code>数据表</code>   。方便对这些数据归类。可以把  <code>数据表</code>  理解为一个  <code>表格</code>（如下图）。    </p>
<p><img src="media/1521193633169.png" alt="1521193633169"></p>
</li>
</ul>
<ul>
<li>建表步骤
<img src="media/1521108452061.png" alt="1521108452061"></li>
</ul>
<ul>
<li>此处我们新建一个叫user的数据表，专门用来存每个用户的信息。</li>
</ul>
<h5 id="2-3-2-">2.3.2 字段</h5>
<ul>
<li>建好表后，我们看到有一块区域叫  <code>字段</code></li>
<li>字段可以理解为是表格中的列名</li>
</ul>
<p><img src="media/1521109108318.png" alt="1521109108318"></p>
<ul>
<li>添加字段如图：</li>
</ul>
<p><img src="media/1521109361025.png" alt="1521109361025"></p>
<p><img src="media/1521109462213.png" alt="1521109462213"></p>
<pre><code>说明：
    1. 字段名可以理解为就是列名
    2. 类型根据实际情况选择对应类型，例如姓名一般是字符串，在数据库中选择VarChar（数据库中字符串类型）
    3. 长度就是说字符串最多允许多少位，长度越小，占用空间越小。（我们用默认长度即可）
</code></pre><ul>
<li>然后我们再依次加  <code>age</code>  和  <code>description</code>  两个字段。</li>
</ul>
<h5 id="2-3-3-">2.3.3 插入一条数据</h5>
<ul>
<li>点中间的  <code>数据浏览器</code></li>
</ul>
<p><img src="media/1521422841677.png" alt="1521422841677"></p>
<ul>
<li>下图类似表格的界面就是新增数据的地方。</li>
</ul>
<p><img src="media/1521422895402.png" alt="1521422895402"></p>
<ul>
<li>我们只在  <code>name</code>，<code>age</code>，<code>description</code> 字段下加数据(Id不加，自动生成)</li>
</ul>
<p><img src="media/1521422959029.png" alt="1521422959029"></p>
<ul>
<li>插入新纪录：对着任意记录  <code>右键</code>，再点  <code>插入新纪录</code>  即可</li>
</ul>
<p><img src="media/1521164433540.png" alt="1521164433540"></p>
<ul>
<li><p>插入完成，如图</p>
<p><img src="media/1521164509269.png" alt="1521164509269"></p>
</li>
</ul>
<pre><code>结论：
    1. Id这个字段里是自动生成的依次递增的整数。
    2. Id字段的作用就是作为某条数据的身份证,用来区分不同的数据
</code></pre><h5 id="2-3-4-">2.3.4 主键/主索引</h5>
<ul>
<li>像  <code>Id</code>  这样用来区分不同数据的字段，叫  <code>主键</code>，或者叫  <code>主索引</code></li>
</ul>
<h5 id="2-3-5-">2.3.5 建表练习</h5>
<ul>
<li>新建一个客户表，内容如下：
 <img src="media/1525173608642.png" alt="1525173608642"></li>
</ul>
<blockquote>
<p>为了方便后面学习时使用，统一起名：</p>
<p>​    客户表的名称叫：customer</p>
<p>​    字段客户ID叫：cId</p>
<p>​    字段客户名称叫：cName</p>
<p>​    字段年龄叫：cAge</p>
</blockquote>
<ul>
<li>新建一个订单表，内容如下：</li>
</ul>
<p><img src="media/1525173854429.png" alt="1525173854429"></p>
<blockquote>
<p>为了方便后面学习时使用，统一起名：</p>
<p>订单表的名称叫：horder</p>
<p>​    字段订单ID叫：oId</p>
<p>​    字段下单商品叫：goodsName</p>
<p>​    字段价格叫：price</p>
<p>​    所属客户叫：custormId</p>
</blockquote>
<p>​    </p>
<h3 id="3-sql-">3. SQL语句</h3>
<h4 id="3-1-sql-">3.1 SQL语句介绍</h4>
<blockquote>
<p>SQL语言，是一种专门对数据库进行操作的语言。</p>
<p>像我们刚刚通过右键就能插入一条数据，但其实它的本质就是执行一条SQL语句</p>
</blockquote>
<h4 id="3-2-">3.2 增删查改语句</h4>
<h5 id="3-2-1-">3.2.1 增删查改的意思</h5>
<ul>
<li>增：新增记录    </li>
</ul>
<ul>
<li>删：删除记录</li>
</ul>
<ul>
<li>查：查询记录</li>
</ul>
<ul>
<li>改：修改记录</li>
</ul>
<h5 id="3-2-2-insert-">3.2.2 insert语句</h5>
<blockquote>
<p> insert语句对应的是“增”，也即新增数据</p>
</blockquote>
<ul>
<li>基本用法：</li>
</ul>
<pre><code class="lang-sql">insert into 表名(字段名) values(值);
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">insert into user(name,age,desc) values(&#39;andy&#39;,20,&#39;打酱油的&#39;);
</code></pre>
<blockquote>
<p>代表给user表新增一条数据，name的值为andy，age的值为20。</p>
</blockquote>
<h5 id="3-2-3-delete-">3.2.3 delete语句</h5>
<blockquote>
<p>delete语句对应的是“删”，也即删除数据</p>
</blockquote>
<ul>
<li>用法（慎用）：</li>
</ul>
<pre><code class="lang-mysql">delete from 表名;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">delete from user;
</code></pre>
<ul>
<li><p>在执行这条语句前我们user表里有三条数据</p>
<p><img src="media/1521169799925.png" alt="1521169799925"></p>
</li>
<li><p>执行完后，我们发现，数据全没了</p>
<p><img src="media/1521169832631.png" alt="1521169832631"></p>
</li>
</ul>
<blockquote>
<p> 结论：delete语句默认会删除表格中的所有数据，要 <code>慎用</code> </p>
</blockquote>
<ul>
<li>按条件删除，用法：（常用）</li>
</ul>
<pre><code class="lang-mysql">delete from 表名 where 字段 = 某个值;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">delete from user where id = 2;
</code></pre>
<blockquote>
<p> 说明：这代表删除user表下，id为2的那条记录</p>
</blockquote>
<ul>
<li>也可以按范围删除，例：</li>
</ul>
<pre><code class="lang-mysql">delete from user where id &lt;= 3;
</code></pre>
<blockquote>
<p>说明：这代表删除user表下，id小于或等于3的那些记录</p>
</blockquote>
<h5 id="3-2-4-select-">3.2.4 select语句</h5>
<blockquote>
<p>select语句对应的是“查”，即查询记录</p>
</blockquote>
<p><strong>指定查询某些字段</strong></p>
<ul>
<li>用法：</li>
</ul>
<pre><code class="lang-mysql">select 字段 from 表名;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-sql">select name,age from user;
</code></pre>
<p>说明：这会查询出user表下所有数据，只会包含<code>name</code>和<code>age</code>字段。如果还有其他字段，结果中不会包含。</p>
<p><strong>查询所有字段</strong></p>
<ul>
<li>用法：</li>
</ul>
<pre><code class="lang-sql">select * from 表名;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-sql">select * from user;
</code></pre>
<blockquote>
<p> 默认会查询出表中的所有数据，如果想指定条件查询，也可以在后面加  <code>where</code></p>
</blockquote>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-sql">select * from user where id &lt; 10;
</code></pre>
<blockquote>
<p> 说明：只查询出id小于10的数据，不包括10</p>
</blockquote>
<h5 id="3-2-5-update-">3.2.5 update语句</h5>
<blockquote>
<p>update语句对应的是“改”，也即修改某条数据</p>
</blockquote>
<ul>
<li>用法（慎用）：</li>
</ul>
<pre><code class="lang-sql">update 表名 set 字段 = 新值;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-sql">update user set name = &#39;黑马一哥&#39;;
</code></pre>
<blockquote>
<p> 说明：把user表中所有数据的name值改为黑马一哥，注意，此操作是修改所有，所以要小心使用！</p>
</blockquote>
<ul>
<li>指定条件修改，例：</li>
</ul>
<pre><code class="lang-sql">update user set name = &#39;黑马一哥&#39; where id = 3;
</code></pre>
<blockquote>
<p> 只修改id为3的这条数据，把name改成黑马一哥</p>
</blockquote>
<h3 id="4-php-">4. PHP操作数据库</h3>
<h4 id="4-1-">4.1 为什么需要</h4>
<blockquote>
<p> 之前我们学的语句都是在MySQL自己的管理界面上操作，但有的时候我们需要在界面上显示一些数据</p>
<p>如下图所示：</p>
</blockquote>
<p><img src="media/1521185431950.png" alt="1521185431950"></p>
<p>​    </p>
<h4 id="4-2-">4.2 连接数据库的步骤</h4>
<blockquote>
<p>思考：把大象装进冰箱需要几步？</p>
<p>​    1.打开冰箱门</p>
<p>​    2.把大象塞进去</p>
<p>​    3.关闭冰箱门</p>
</blockquote>
<ul>
<li><p>PHP操作数据库，其实也主要分为三大步：</p>
<ul>
<li>建立数据库连接</li>
<li>操作数据库（增删改查）</li>
<li>关闭数据库连接</li>
</ul>
<p>​</p>
</li>
</ul>
<h4 id="4-3-">4.3 建立数据库连接</h4>
<ul>
<li>语法：</li>
</ul>
<pre><code class="lang-php">mysqli_connect(&#39;数据库地址&#39;,&#39;账号&#39;,&#39;密码&#39;,&#39;数据名&#39;);
</code></pre>
<ul>
<li>参数解释：</li>
</ul>
<pre><code>参数1：数据库的ip地址
参数2：数据库管理的账号
参数3：数据库管理的密码
参数4：数据库名，因为一个数据库服务器里可能有很多数据库，你需要告诉它连接哪个数据库的
</code></pre><ul>
<li>例：</li>
</ul>
<pre><code class="lang-php">$link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);
</code></pre>
<blockquote>
<p>使用完此函数后，会有一个返回值，如果返回值为false代表连接失败</p>
<p>如果返回值不为false，那么会打印一个类似下图的数据</p>
</blockquote>
<p><img src="media/1521188128269.png" alt="1521188128269">这个返回值我们一般叫  <code>连接通道</code>，这个  <code>连接通道</code>  里面的内容是什么我们不需要关心，只需要知道，<code>连接通道</code>里包含了本次连接的各种信息，只要不是false就代表数据库连接成功。</p>
<p><img src="media/1524907078565.png" alt="1524907078565"></p>
<h4 id="4-4-">4.4 操作数据库</h4>
<ul>
<li>语法：</li>
</ul>
<pre><code class="lang-php">mysqli_query(连接通道，SQL语句);
</code></pre>
<h5 id="4-4-1-">4.4.1 查询数据</h5>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-php">$result =  mysqli_query($link,&quot;select * from user&quot;);
</code></pre>
<blockquote>
<p>说明：</p>
<p>​    这句话执行完后会得到一个结果，结果包含了查询得到的数据，我们用一个变量    <code>$result</code>  接收</p>
<p>但是，这个返回值我们不能直接拿来用，还需要用一个  <code>解析函数</code>  来把数据解析出来</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<pre><code class="lang-php">mysqli_fetch_all(查询结果,MYSQLI_ASSOC);
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-php">$users = mysqli_fetch_all($result,MYSQLI_ASSOC);
</code></pre>
<p>说明：</p>
<ul>
<li>参数1：我们传之前用<code>mysqli_query</code>函数查询到的结果</li>
<li>参数2：固定写  <code>MYSQLI_ASSOC</code>   ，如果记不住，就写 <code>1</code>。</li>
</ul>
<blockquote>
<p> 函数执行后，会把结果转成一个关联型数组。这样，我们要的数据就比较明确了。</p>
<p> 注：参数2如果不传  <code>MYSQLI_ASSOC</code>，得到的会是一个普通数组，那样我们取数据时只能根据下标来取。</p>
</blockquote>
<h5 id="4-4-2-">4.4.2 增、删、改数据</h5>
<blockquote>
<p>增、删、改数据，也是用  <code>mysqli_query</code>  这个函数操作。只不过把SQL语句换成对应的语句</p>
</blockquote>
<ul>
<li>增加：</li>
</ul>
<pre><code class="lang-php">mysqli_query($link,&#39;insert into user(name,age,desc) values(&quot;新人&quot;,16,&quot;新增加的一条数据&quot;)&#39;);
</code></pre>
<ul>
<li>删除：</li>
</ul>
<pre><code class="lang-php">mysqli_query($link,&#39;delete from user where id=2&#39;);
</code></pre>
<ul>
<li>修改：</li>
</ul>
<pre><code class="lang-php">mysqli_query($link,&#39;update user set name=&quot;修改&quot;,age=18,desc=&quot;我被改了&quot; where id=2&#39;);
</code></pre>
<blockquote>
<p>因为增、删、改不是为了获取结果，所以此时  <code>mysqli_query</code>  的返回值不再会是一堆数据，而是获得受影响的行数，我们根据受影响的行数是否大于0，就可以知道是否操作成功</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<h4 id="4-5-">4.5 关闭数据库连接</h4>
<blockquote>
<p> 无论你是做增删查改中的哪一种，请记得最后一定要关闭数据库连接！</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<pre><code class="lang-php">mysqli_close($link);
</code></pre>
<blockquote>
<p> 注意：请记得一定要关闭数据库连接，否则会占用服务器资源。</p>
</blockquote>
<h3 id="5-php-">5. PHP操作数据库步骤的封装</h3>
<blockquote>
<p>无论做增、删还是改，代码都是一样的，唯一不同的是SQL语句不同。</p>
<p>为了以后用起来方便和节省代码量，我们可以把增、删、改的代码封装成函数。</p>
</blockquote>
<h4 id="5-1-">5.1 增、删、改封装</h4>
<ul>
<li>代码如下：</li>
</ul>
<pre><code class="lang-php">function my_Excute($sql){

    // 连接数据库
    $link = mysqli_connect(&#39;127.0.0.1&#39;, &#39;root&#39;, &#39;root&#39;, &#39;study&#39;);

    // 执行sql语句
    $rows = mysqli_query($link, $sql); //返回值就是受影响的行数

    // 关闭连接
    mysqli_close($link);

    // 返回行数
    return $rowNum;
}
</code></pre>
<blockquote>
<p>严格来讲，数据库的IP、用户名、密码也该当参数传进来，但是因为我们在学习阶段，所以此处我们就写死本地IP和用户密码。</p>
</blockquote>
<h4 id="5-2-">5.2 查询数据的封装</h4>
<pre><code class="lang-php">function my_Query($sql){

    // 连接数据库
    $link = mysqli_connect(&#39;127.0.0.1&#39;, &#39;root&#39;, &#39;root&#39;, &#39;study&#39;);

    // 执行sql语句
    $result = mysqli_query($link, $sql);

    // 解析数据
    $data = mysqli_fetch_all($result,1);

    // 关闭连接
    mysqli_close($link);

    // 返回结果
    return $data;
}
</code></pre>
<h3 id="6-">6. 综合案例 --- 人员管理系统</h3>
<ul>
<li>效果如图：</li>
</ul>
<p><img src="media/1521423732878.png" alt="1521423732878"></p>
<h4 id="6-1-">6.1 需求说明：</h4>
<ul>
<li><p>用户打开首页时，会从数据库中查询到  <code>user</code>  表下的最新全部数据并显示在界面上</p>
<p><img src="media/1524907861450.png" alt="1524907861450"></p>
<p>​</p>
</li>
<li><p>当用户点击<code>新增</code>时，会跳转到新增页面，如图</p>
</li>
</ul>
<p><img src="media/1521426116636.png" alt="1521426116636"></p>
<ul>
<li>当用户点击某行的  <code>编辑</code> 时，会显示编辑页面，并把当前行的数据带入，如图</li>
</ul>
<p><img src="media/1521426459230.png" alt="1521426459230"></p>
<ul>
<li>当用户点击 <code>删除</code>，则对应那行数据要删掉</li>
</ul>
<h4 id="6-2-">6.2 首页数据展示</h4>
<blockquote>
<p>html和css部分不是重点，我们直接用写好的页面结构即可。</p>
<p>初始模板代码：<a href="usermanage.rar">点我下载</a></p>
</blockquote>
<ul>
<li>让  <code>index.php</code>  展示数据，代码如下：</li>
</ul>
<pre><code class="lang-php+HTML">&lt;tbody&gt;
      &lt;!-- 此处写生成表格的代码 --&gt;
        &lt;?php
            //建立数据库连接
            $link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);

            //查询数据库
            $result = mysqli_query($link,&quot;select *from user&quot;);

            //解析成数组
            $data = mysqli_fetch_all($result,1);

            //关闭数据库连接
            mysqli_close($link);

            //数据有多少个，就循环多少次来创建tr
            for($i = 0; $i &lt; count($data); $i++):
        ?&gt;
          &lt;tr&gt;
            &lt;td&gt;&lt;?php echo $data[$i][&#39;Id&#39;]; ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo $data[$i][&#39;name&#39;]; ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo $data[$i][&#39;age&#39;]; ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo $data[$i][&#39;description&#39;]; ?&gt;&lt;/td&gt;
            &lt;td&gt;
              &lt;a href=&#39;#&#39; class=&quot;btn btn-sm btn-info&quot;&gt;编辑&lt;/a&gt;
              &lt;a href=&#39;#&#39; class=&quot;btn btn-sm btn-danger&quot;&gt;删除&lt;/a&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;?php endfor;?&gt;
&lt;/tbody&gt;
</code></pre>
<h4 id="6-2-">6.2 新增功能</h4>
<blockquote>
<p>思路：</p>
<pre><code>       1. insert.html的表单提交到doAdd.php文件，所以我们需要创建这个文件
       2. doAdd.php里，拿到提交过来的用户名、年龄、描述等信息
       3. 用PHP操作数据库，把这些信息当做字段的值新增
       4. 新增完毕跳转回首页看效果
</code></pre></blockquote>
<ul>
<li><code>doAdd.php</code>  代码如下：</li>
</ul>
<pre><code class="lang-php">&lt;?php

    //1. 获得提交的数据
    $name = $_POST[&#39;userName&#39;];
    $age = $_POST[&#39;userAge&#39;];
    $desc = $_POST[&#39;userDesc&#39;];

    //2. 建立数据库连接
    $link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);

    //3. 准备SQL语句
    $sql = &quot;insert into user(name,age,description) values(&#39;$name&#39;,&#39;$age&#39;,&#39;$desc&#39;)&quot;;
    //4. 执行新增语句
    $rows = mysqli_query($link,$sql);

    //5. 关闭数据库连接
    mysqli_close($link);

    //6. 跳转回首页
    header(&#39;location:index.php&#39;);
?&gt;
</code></pre>
<blockquote>
<p>注意：写SQL语句时，values部分每个值都要用  <code>&#39;&#39;</code> 包起来，不然插入数据库会失败</p>
</blockquote>
<h4 id="6-3-">6.3 编辑功能</h4>
<pre><code>需求：
    当点击index.php这个首页上的 编辑 按钮时，会跳转到修改界面，并且把被点击的那行数据带过去
</code></pre><ul>
<li>来到  <code>index.php</code>，找到编辑这个a标签，修改它的href属性，代码如下：</li>
</ul>
<pre><code class="lang-php+HTML">&lt;a href=&quot;./update.php?id=&lt;?php echo $data[$i][&#39;Id&#39;]; ?&gt;&quot; class=&quot;btn btn-sm btn-info&quot;&gt;编辑&lt;/a&gt;
</code></pre>
<blockquote>
<p>说明：谁被点击，就会跳转到update.php文件，并把被点击的那条数据id传过去，因为为了方便update.php界面可以展示出这条被点击的数据。</p>
</blockquote>
<ul>
<li>修改update.php文件，核心代码如下：</li>
</ul>
<pre><code class="lang-php+HTML">     &lt;!-- 这里先根据id查询出对应的数据 --&gt;
    &lt;?php

      //获取传递过来的id
      $id = $_GET[&#39;id&#39;];
      //打开数据库连接
      $link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);
      //准备SQL语句
      $sql = &quot;select * from user where id = &#39;$id&#39;&quot;;
      //执行查询
      $result = mysqli_query($link,$sql);
      //解析结果
      $data = mysqli_fetch_all($result,1);
    ?&gt;
     &lt;!-- 后面还有段把查到数据显示到html元素的代码，因代码太多，讲义这里省略，课堂讲 --&gt;
</code></pre>
<blockquote>
<p>经过上面步骤后，发现当用户点保存后会跳转到doUpdate.php进行处理</p>
</blockquote>
<ul>
<li>新建doUpdate.php，核心代码如下：</li>
</ul>
<pre><code class="lang-php">&lt;?php
    //获取提交过来的数据
    $id = $_POST[&#39;id&#39;];
    $name = $_POST[&#39;userName&#39;];
    $age = $_POST[&#39;userAge&#39;];
    $desc = $_POST[&#39;userDesc&#39;];

    //打开数据库连接
    $link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);

    //准备SQL语句
    $sql = &quot;update user set name=&#39;$name&#39;,age=&#39;$age&#39;,description=&#39;$desc&#39; where id=&#39;$id&#39;&quot;;
    //执行语句
    $rows = $result = mysqli_query($link,$sql);

    //关闭连接
    mysqli_close($link);

    //跳转回首页
    header(&#39;location:index.php&#39;);
?&gt;
</code></pre>
<h4 id="6-4-">6.4 删除功能</h4>
<pre><code>需求：点击删除后，把删除所在那行的数据删掉
</code></pre><ul>
<li>在首页修改  <code>删除</code>  这个a标签的href属性如下：</li>
</ul>
<pre><code class="lang-php+HTML">&lt;a href=&quot;./delete.php?deleteId=&lt;?php echo $data[$i][&#39;Id&#39;]; ?&gt;&quot; class=&quot;btn btn-sm btn-danger&quot;&gt;删除&lt;/a&gt;
</code></pre>
<ul>
<li>新建delete.php文件，核心代码如下：</li>
</ul>
<pre><code class="lang-php">&lt;?php

    //获得传递过来的id
    $id = $_GET[&#39;deleteId&#39;];

    //建立数据库连接
    $link = mysqli_connect(&#39;127.0.0.1&#39;,&#39;root&#39;,&#39;root&#39;,&#39;manage&#39;);

    //准备SQL语句
    $sql = &quot;delete from user where id =&#39;$id&#39;&quot;;

    //执行语句
    $rows = mysqli_query($link,$sql);

    //关闭连接
    mysqli_close($link);

    //跳转回首页
    header(&#39;location:index.php&#39;);
?&gt;
</code></pre>
<h3 id="7-">7. 总结前后端开发分工</h3>
<p><img src="media/1521450272410.png" alt="1521450272410"></p>
<pre><code>如图：左边部分为前端开发人员所做，右边部分为后台人员所做。

可以发现：前端开发主要是做用户直观看到的界面部分，以及跟服务器发请求（请求可以是要数据，也可以是提交数据）。而后端开发主要是处理数据、操作数据库等。
</code></pre><h3 id="8-">8. 扩展知识</h3>
<h4 id="8-1-">8.1 通配符--&gt;模糊查询</h4>
<blockquote>
<p><code>%</code>为通配符，一般搭配 <code>like</code> 关键字使用。</p>
</blockquote>
<h5 id="8-1-1-">8.1.1 以什么开头</h5>
<ul>
<li>查询所有  <code>字段</code>  以 <code>关键字</code>  开头的数据</li>
</ul>
<pre><code class="lang-mysql">select * from 表名 where 字段 like &#39;关键字%&#39;;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">-- 查询user表中name以j开头的所有数据
select *from user where name like &#39;j%&#39;;
</code></pre>
<h5 id="8-1-2-">8.1.2 以什么结尾</h5>
<ul>
<li>查询所有  <code>字段</code>  以 <code>关键字</code> 结尾的数据</li>
</ul>
<pre><code class="lang-mysql">select * from 表名 where 字段 like &#39;%关键字&#39;&#39;;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">-- 查询user表中name以y结尾的所有数据
select *from user where name like &#39;%y&#39;;
</code></pre>
<h5 id="8-1-3-">8.1.3 包含什么内容</h5>
<ul>
<li>查询所有  <code>字段</code>  包含 <code>关键字</code> 的数据</li>
</ul>
<pre><code class="lang-mysql">select * from 表名 where 字段 like &#39;%关键字%&#39;;
</code></pre>
<ul>
<li>例:</li>
</ul>
<pre><code class="lang-mysql">-- 查询user表中name中包含o的所有数据
select *from user where name like &#39;%o%&#39;;
</code></pre>
<h4 id="8-2-">8.2 并且条件</h4>
<ul>
<li>使用and关键字，例：</li>
</ul>
<pre><code class="lang-mysql">-- 查询user表中name为jack，并且age为20的数据
select *from user where name=&#39;jack&#39; and age=&#39;20&#39;
</code></pre>
<h4 id="8-3-">8.3 或者条件</h4>
<ul>
<li>使用or关键字，例</li>
</ul>
<pre><code class="lang-mysql">-- 找到user表中age小于10，或者age大于100的数据
select *from user where age &lt; 10 or age &gt; 100;
</code></pre>
<h4 id="8-4-">8.4 连表查询</h4>
<ul>
<li>很多时候同一个页面的数据是从多张表取出</li>
<li>例如：如果想展示所有用户的信息以及它下的订单商品，就需要找到两张表的数据联合起来。</li>
<li>如图：</li>
</ul>
<p><img src="media/1525174423451.png" alt="1525174423451"></p>
<blockquote>
<p>我们首先会想到，把两张表一起查，但这样做不会得到正确结果，例：</p>
</blockquote>
<pre><code class="lang-mysql">select *from customer ,horder;
</code></pre>
<ul>
<li>结果如图：</li>
</ul>
<p><img src="media/1525180415087.png" alt="1525180415087"></p>
<blockquote>
<p>这相当于把两表的所有记录都联了一次（这叫交叉连接），如图说明</p>
</blockquote>
<p> <img src="media/1525180610588.png" alt="1525180610588"></p>
<ul>
<li>如果要起到左表张三，只跟右表属于张三的记录连接起来，我们需要用  <code>inner join ... on</code>   关键字</li>
<li>语法：</li>
</ul>
<pre><code class="lang-mysql">select 字段 from 表1 inner join 表2 on 对应关系
</code></pre>
<ul>
<li>例:</li>
</ul>
<pre><code class="lang-mysql">-- 找到customer和horder双表结合的结果，只把customer中的cId字段和horder表中custormId字段相等的记录组合在一起
select *from customer inner join horder on customer.cId =  horder.custormId
</code></pre>
<ul>
<li>如果觉得表名太长，可以给表名起别名，例：</li>
</ul>
<pre><code class="lang-mysql">select *from customer c inner join horder h on c.cId =  h.custormId
</code></pre>
<h4 id="8-5-">8.5 分页查询</h4>
<ul>
<li>有时候某张表里有大量数据，而我们只需要查中间的某几条，因此可以用下面的分页查询语句</li>
</ul>
<pre><code class="lang-mysql">select * from 表名 limit 第几条开始,查几条;
</code></pre>
<ul>
<li>例：</li>
</ul>
<pre><code class="lang-mysql">-- 查询person表里第10条到第20条数据（一共查出来10条）
select * from person limit 10,10;
</code></pre>
<blockquote>
<p>思考：为什么不直接用id&gt;= 10 and id&lt;20的写法 </p>
</blockquote>
<h4 id="8-6-sql-">8.6 建表SQL语句</h4>
<pre><code class="lang-mysql">CREATE TABLE 表名称
(
    列名称1 数据类型,
    列名称2 数据类型,
    列名称3 数据类型,
    ....
)
</code></pre>
<p>注意：<strong>不要记</strong>，知道这是一条建表的语句即可。真正要建表直接用管理工具鼠标点击创建即可。</p>
<h3 id="9-">9. 延伸阅读</h3>
<p> <a href="程序员的SQL金典.pdf">程序员的SQL金典</a> （按ctrl+鼠标左键）</p>

          	</article>
        </div>
		</div>
  </body>
</html>
<script type="text/javascript" src="toc/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="toc/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="toc/js/ztree_toc.js"></script>
<script type="text/javascript" src="toc_conf.js"></script>

<SCRIPT type="text/javascript" >
<!--
$(document).ready(function(){
    var css_conf = eval(markdown_panel_style);
    $('#readme').css(css_conf)
    
    var conf = eval(jquery_ztree_toc_opts);
		$('#tree').ztree_toc(conf);
});
//-->
</SCRIPT>